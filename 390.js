(self.webpackChunkgamelib=self.webpackChunkgamelib||[]).push([[390],{610:(t,e,i)=>{"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,{Z:()=>n})},991:(t,e,i)=>{"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.d(e,{Z:()=>s})},156:(t,e,i)=>{"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Z:()=>n})},390:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BaseGlobalState:()=>c});var n=i(156),s=i(610),r=i(991),a=function(){function t(e,i,n){(0,s.Z)(this,t),this.initializer=void 0,this.typeGuard=void 0,this.name=void 0,this.initializer=i,this.typeGuard=n,this.name=e}return(0,r.Z)(t,[{key:"get",value:function(t){if(null===localStorage.getItem(this.name))return this.getDefault(t);var e=JSON.parse(localStorage.getItem(this.name));return this.typeGuard&&!this.typeGuard(e)?(console.warn("Found invalid shape of persistent data ".concat(this.name,", assigning to default.")),Object.assign(this.getDefault(t),e)):Object.assign(this.getDefault(t),e)}},{key:"getDefault",value:function(t){var e=this.initializer(t);return this.put(e),e}},{key:"put",value:function(t){localStorage.setItem(this.name,JSON.stringify(t))}}]),t}(),o=function(){function t(e){(0,s.Z)(this,t),this._currentPage=void 0,this._transitionData={},this._pages={},this._history=[],this.requestTransition=void 0,this.requestTransition=this._requestTransition(e)}return(0,r.Z)(t,[{key:"addPage",value:function(t,e){t in this._pages?console.warn("Trying to register duplicate page ".concat(t,"!")):this._pages[t]=e}},{key:"transitionData",get:function(){return this._transitionData}},{key:"pages",get:function(){return this._pages}},{key:"currentPage",get:function(){return this._currentPage}},{key:"_requestTransition",value:function(t){var e=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(console.log("[ROUTER] Moving to ".concat(e)),void 0!==this._pages[e]&&null!==this._pages[e]&&(void 0===this._currentPage||this._currentPage.canTransition(this,e))){i&&(this._history=[]),this._history.push(e),this._currentPage=this.pages[e],this._transitionData=n;var s=document.getElementById("main");s.innerHTML="",s.classList.forEach((function(t){return s.classList.remove(t)})),s.classList.add(e),this._currentPage.load(s,this,t),this._currentPage.init(this,t)}};return e.bind(this)}},{key:"previous",value:function(t){var e=this._history.slice(-2)[0];void 0!==e&&(this._currentPage.cleanup(this,t),this._history.splice(-2,2),this.requestTransition(e,!1))}}]),t}();function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var c=function(){function t(e,i){(0,s.Z)(this,t),this.router=void 0,this.persistence=void 0,this.data=void 0,this.router=new o(this),this.persistence=new a(e,(function(){return i})),this.data=this.persistence.get(this),this.persistence.put(this.data)}return(0,r.Z)(t,[{key:"addScore",value:function(t){this.data.scores.push(t),this.data.scores.sort((function(t,e){return t.score-e.score})).reverse(),this.data.scores=this.data.scores.slice(0,5),this.persistence.put(this.data)}},{key:"remapControl",value:function(t,e){this.data.keyMap[t]=e,this.persistence.put(this.data)}},{key:"getData",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,n.Z)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.data)}},{key:"setData",value:function(t){this.data=t,this.persistence.put(t)}}]),t}()}}]);
//# sourceMappingURL=390.js.map