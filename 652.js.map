{"version":3,"sources":["webpack://gamelib/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://gamelib/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://gamelib/./src/pages/ScorePage.ts"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","ScorePage","base","router","state","scores","getData","header","document","createElement","innerText","appendChild","undefined","transitionData","score","some","it","Math","round","hsContainer","classList","add","text","toFixed","form","input","type","button","append","onsubmit","addScore","name","value","parseInt","requestTransition","sort","a","b","reverse","scoreElement","home","href","addEventListener","_router","_globalState","_","_state"],"mappings":"gGAAe,SAASA,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qC,6CCFxB,SAASC,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAInC,SAASO,EAAad,EAAae,EAAYC,GAG5D,OAFID,GAAYb,EAAkBF,EAAYiB,UAAWF,GACrDC,GAAad,EAAkBF,EAAagB,GACzChB,E,6MCRF,IAAMkB,EAAb,2EACE,SACEC,EACAC,EACAC,GAEA,IACQC,EADKD,EAAME,UACXD,OACFE,EAASC,SAASC,cAAc,MAItC,GAHAF,EAAOG,UAAY,cACnBR,EAAKS,YAAYJ,QAEaK,IAA1BT,EAAOU,eAA8B,KAC/BC,EAAUX,EAAOU,eAAjBC,MAER,GAAqB,iBAAVA,IAEPT,EAAOU,MAAK,SAACC,GAAD,OAAQC,KAAKC,MAAMJ,GAASE,EAAGF,UAC3CT,EAAOhB,OAAS,GACH,CACb,IAAM8B,EAAcX,SAASC,cAAc,OAC3CU,EAAYC,UAAUC,IAAI,aAC1B,IAAMC,EAAOd,SAASC,cAAc,KACpCa,EAAKZ,UAAL,kCAA4CI,EAAMS,QAChD,GADF,mBAGAJ,EAAYR,YAAYW,GACxB,IAAME,EAAOhB,SAASC,cAAc,QAC9BgB,EAAQjB,SAASC,cAAc,SACrCgB,EAAMC,KAAO,OACbF,EAAKb,YAAYc,GACjB,IAAME,EAASnB,SAASC,cAAc,SACtCkB,EAAOD,KAAO,SACdC,EAAOjB,UAAY,SACnBc,EAAKI,OAAOD,GACZH,EAAKK,SAAW,WACdzB,EAAM0B,SAAS,CACbC,KAAMN,EAAMO,MACZlB,MAAOmB,SAASnB,EAAMS,QAAQ,MAEhCnB,EAAMD,OAAO+B,kBAAkB,UAAU,IAE3Cf,EAAYS,OAAOJ,GACnBtB,EAAK0B,OAAOT,IAKlB,IA3CM,I,w5BAAA,CA2CYd,EAAO8B,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEtB,MAAQuB,EAAEvB,SACtBwB,WA5CxB,IA4CN,2BAAyC,KAA9BxB,EAA8B,QACjCyB,EAAe/B,SAASC,cAAc,KAC5C8B,EAAa7B,UAAb,UAA4BI,EAAMA,MAAlC,cAA6CA,EAAMiB,MACnD7B,EAAKS,YAAY4B,IA/Cb,8BAkDN,IAAMC,EAAOhC,SAASC,cAAc,KACpC+B,EAAKC,KAAO,IACZD,EAAKE,iBAAiB,SAAS,WAC7BtC,EAAMD,OAAO+B,kBAAkB,WAEjCM,EAAK9B,UAAY,OACjBR,EAAKS,YAAY6B,KA7DrB,kBAgEE,SACEG,EACAC,MAlEJ,2BAuEE,SAAcD,EAAuBE,GACnC,OAAO,IAxEX,qBA2EE,SACEF,EACAG,QA7EJ","file":"652.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { BasePersistedData } from \"../core/data/BasePersistedData\";\nimport { GlobalState } from \"../core/menus/GlobalState\";\nimport { Page } from \"../core/menus/Page\";\nimport { Router } from \"../core/menus/Router\";\n\nexport class ScorePage implements Page<GlobalState<BasePersistedData>> {\n  load(\n    base: HTMLElement,\n    router: Router<GlobalState<BasePersistedData>>,\n    state: GlobalState<BasePersistedData>\n  ): void {\n    const data = state.getData();\n    const { scores } = data;\n    const header = document.createElement(\"h1\");\n    header.innerText = \"High Scores\";\n    base.appendChild(header);\n\n    if (router.transitionData !== undefined) {\n      const { score } = router.transitionData;\n\n      if (typeof score === \"number\") {\n        const highScore =\n          scores.some((it) => Math.round(score) > it.score) ||\n          scores.length < 5;\n        if (highScore) {\n          const hsContainer = document.createElement(\"div\");\n          hsContainer.classList.add(\"container\");\n          const text = document.createElement(\"p\");\n          text.innerText = `You got a high score of ${score.toFixed(\n            0\n          )}! Enter a name.`;\n          hsContainer.appendChild(text);\n          const form = document.createElement(\"form\");\n          const input = document.createElement(\"input\");\n          input.type = \"text\";\n          form.appendChild(input);\n          const button = document.createElement(\"input\");\n          button.type = \"submit\";\n          button.innerText = \"Submit\";\n          form.append(button);\n          form.onsubmit = () => {\n            state.addScore({\n              name: input.value,\n              score: parseInt(score.toFixed(0)),\n            });\n            state.router.requestTransition(\"scores\", false);\n          };\n          hsContainer.append(form);\n          base.append(hsContainer);\n        }\n      }\n    }\n\n    const scoreList = scores.sort((a, b) => a.score - b.score);\n    for (const score of scoreList.reverse()) {\n      const scoreElement = document.createElement(\"p\");\n      scoreElement.innerText = `${score.score} - ${score.name}`;\n      base.appendChild(scoreElement);\n    }\n\n    const home = document.createElement(\"a\");\n    home.href = \"#\";\n    home.addEventListener(\"click\", () => {\n      state.router.requestTransition(\"home\");\n    });\n    home.innerText = \"Back\";\n    base.appendChild(home);\n  }\n\n  init(\n    _router: Router<GlobalState<BasePersistedData>>,\n    _globalState: GlobalState<BasePersistedData>\n  ): void {\n    return;\n  }\n\n  canTransition(_router: Router<null>, _: string): boolean {\n    return true;\n  }\n\n  cleanup(\n    _router: Router<GlobalState<BasePersistedData>>,\n    _state: GlobalState<BasePersistedData>\n  ): void {\n    return;\n  }\n}\n"],"sourceRoot":""}