{"version":3,"sources":["webpack://gamelib/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://gamelib/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://gamelib/./src/pages/ScorePage.ts"],"names":["ScorePage","base","router","state","data","getData","scores","header","document","createElement","innerText","appendChild","transitionData","undefined","score","highScore","some","it","Math","round","length","hsContainer","classList","add","text","toFixed","form","input","type","button","append","onsubmit","addScore","name","value","parseInt","requestTransition","scoreList","sort","a","b","reverse","scoreElement","home","href","addEventListener","_router","_globalState","_","_state"],"mappings":";;;;;;;;;;;;;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;ACJA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACTO,IAAMA,SAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,WACE,cACEC,IADF,EAEEC,MAFF,EAGEC,KAHF,EAIQ;AACN,UAAMC,IAAI,GAAGD,KAAK,CAACE,OAAN,EAAb;AADM,UAEEC,MAFF,GAEaF,IAFb,CAEEE,MAFF;AAGN,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAf;AACAF,YAAM,CAACG,SAAP,GAAmB,aAAnB;AACAT,UAAI,CAACU,WAAL,CAAiBJ,MAAjB;;AAEA,UAAIL,MAAM,CAACU,cAAP,KAA0BC,SAA9B,EAAyC;AAAA,YAC/BC,KAD+B,GACrBZ,MAAM,CAACU,cADc,CAC/BE,KAD+B;;AAGvC,YAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,cAAMC,SAAS,GACbT,MAAM,CAACU,IAAP,CAAY,UAACC,EAAD;AAAA,mBAAQC,IAAI,CAACC,KAAL,CAAWL,KAAX,IAAoBG,EAAE,CAACH,KAA/B;AAAA,WAAZ,KACAR,MAAM,CAACc,MAAP,GAAgB,CAFlB;;AAGA,cAAIL,SAAJ,EAAe;AACb,gBAAMM,WAAW,GAAGb,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApB;AACAY,uBAAW,CAACC,SAAZ,CAAsBC,GAAtB,CAA0B,WAA1B;AACA,gBAAMC,IAAI,GAAGhB,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACAe,gBAAI,CAACd,SAAL,qCAA4CI,KAAK,CAACW,OAAN,CAC1C,CAD0C,CAA5C;AAGAJ,uBAAW,CAACV,WAAZ,CAAwBa,IAAxB;AACA,gBAAME,IAAI,GAAGlB,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb;AACA,gBAAMkB,KAAK,GAAGnB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACAkB,iBAAK,CAACC,IAAN,GAAa,MAAb;AACAF,gBAAI,CAACf,WAAL,CAAiBgB,KAAjB;AACA,gBAAME,MAAM,GAAGrB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAf;AACAoB,kBAAM,CAACD,IAAP,GAAc,QAAd;AACAC,kBAAM,CAACnB,SAAP,GAAmB,QAAnB;AACAgB,gBAAI,CAACI,MAAL,CAAYD,MAAZ;;AACAH,gBAAI,CAACK,QAAL,GAAgB,YAAM;AACpB5B,mBAAK,CAAC6B,QAAN,CAAe;AACbC,oBAAI,EAAEN,KAAK,CAACO,KADC;AAEbpB,qBAAK,EAAEqB,QAAQ,CAACrB,KAAK,CAACW,OAAN,CAAc,CAAd,CAAD;AAFF,eAAf;AAIAtB,mBAAK,CAACD,MAAN,CAAakC,iBAAb,CAA+B,QAA/B,EAAyC,KAAzC;AACD,aAND;;AAOAf,uBAAW,CAACS,MAAZ,CAAmBJ,IAAnB;AACAzB,gBAAI,CAAC6B,MAAL,CAAYT,WAAZ;AACD;AACF;AACF;;AAED,UAAMgB,SAAS,GAAG/B,MAAM,CAACgC,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ;AAAA,eAAUD,CAAC,CAACzB,KAAF,GAAU0B,CAAC,CAAC1B,KAAtB;AAAA,OAAZ,CAAlB;;AA3CM,iDA4CcuB,SAAS,CAACI,OAAV,EA5Cd;AAAA;;AAAA;AA4CN,4DAAyC;AAAA,cAA9B3B,MAA8B;AACvC,cAAM4B,YAAY,GAAGlC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAArB;AACAiC,sBAAY,CAAChC,SAAb,aAA4BI,MAAK,CAACA,KAAlC,gBAA6CA,MAAK,CAACmB,IAAnD;AACAhC,cAAI,CAACU,WAAL,CAAiB+B,YAAjB;AACD;AAhDK;AAAA;AAAA;AAAA;AAAA;;AAkDN,UAAMC,IAAI,GAAGnC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACAkC,UAAI,CAACC,IAAL,GAAY,GAAZ;AACAD,UAAI,CAACE,gBAAL,CAAsB,OAAtB,EAA+B,YAAM;AACnC1C,aAAK,CAACD,MAAN,CAAakC,iBAAb,CAA+B,MAA/B;AACD,OAFD;AAGAO,UAAI,CAACjC,SAAL,GAAiB,MAAjB;AACAT,UAAI,CAACU,WAAL,CAAiBgC,IAAjB;AACD;AA9DH;AAAA;AAAA,WAgEE,cACEG,OADF,EAEEC,YAFF,EAGQ;AACN;AACD;AArEH;AAAA;AAAA,WAuEE,uBAAcD,OAAd,EAAqCE,CAArC,EAAyD;AACvD,aAAO,IAAP;AACD;AAzEH;AAAA;AAAA,WA2EE,iBACEF,OADF,EAEEG,MAFF,EAGQ;AACN;AACD;AAhFH;;AAAA;AAAA,I","file":"src_pages_ScorePage_ts.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { BasePersistedData } from \"../core/data/BasePersistedData\";\nimport { GlobalState } from \"../core/menus/GlobalState\";\nimport { Page } from \"../core/menus/Page\";\nimport { Router } from \"../core/menus/Router\";\n\nexport class ScorePage implements Page<GlobalState<BasePersistedData>> {\n  load(\n    base: HTMLElement,\n    router: Router<GlobalState<BasePersistedData>>,\n    state: GlobalState<BasePersistedData>\n  ): void {\n    const data = state.getData();\n    const { scores } = data;\n    const header = document.createElement(\"h1\");\n    header.innerText = \"High Scores\";\n    base.appendChild(header);\n\n    if (router.transitionData !== undefined) {\n      const { score } = router.transitionData;\n\n      if (typeof score === \"number\") {\n        const highScore =\n          scores.some((it) => Math.round(score) > it.score) ||\n          scores.length < 5;\n        if (highScore) {\n          const hsContainer = document.createElement(\"div\");\n          hsContainer.classList.add(\"container\");\n          const text = document.createElement(\"p\");\n          text.innerText = `You got a high score of ${score.toFixed(\n            0\n          )}! Enter a name.`;\n          hsContainer.appendChild(text);\n          const form = document.createElement(\"form\");\n          const input = document.createElement(\"input\");\n          input.type = \"text\";\n          form.appendChild(input);\n          const button = document.createElement(\"input\");\n          button.type = \"submit\";\n          button.innerText = \"Submit\";\n          form.append(button);\n          form.onsubmit = () => {\n            state.addScore({\n              name: input.value,\n              score: parseInt(score.toFixed(0)),\n            });\n            state.router.requestTransition(\"scores\", false);\n          };\n          hsContainer.append(form);\n          base.append(hsContainer);\n        }\n      }\n    }\n\n    const scoreList = scores.sort((a, b) => a.score - b.score);\n    for (const score of scoreList.reverse()) {\n      const scoreElement = document.createElement(\"p\");\n      scoreElement.innerText = `${score.score} - ${score.name}`;\n      base.appendChild(scoreElement);\n    }\n\n    const home = document.createElement(\"a\");\n    home.href = \"#\";\n    home.addEventListener(\"click\", () => {\n      state.router.requestTransition(\"home\");\n    });\n    home.innerText = \"Back\";\n    base.appendChild(home);\n  }\n\n  init(\n    _router: Router<GlobalState<BasePersistedData>>,\n    _globalState: GlobalState<BasePersistedData>\n  ): void {\n    return;\n  }\n\n  canTransition(_router: Router<null>, _: string): boolean {\n    return true;\n  }\n\n  cleanup(\n    _router: Router<GlobalState<BasePersistedData>>,\n    _state: GlobalState<BasePersistedData>\n  ): void {\n    return;\n  }\n}\n"],"sourceRoot":""}